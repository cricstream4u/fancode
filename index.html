<!DOCTYPE html>
<html lang="en">
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Movies Streaming by Asif Ansari</title>
  <link rel="shortcut icon" type="image/x-icon" href="Cric stream Favicon.jpg" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jwplayer.com/libraries/IDzF9Zmk.js"></script>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-database-compat.js"></script>

  <style>
    body {
      all: unset;
      font-family: Arial, sans-serif;
    }

    @keyframes marquee {
      from { transform: translateX(0%); }
      to { transform: translateX(-100%); }
    }

    #jwplayerDiv {
      aspect-ratio: 16 / 9;
    }
  </style>
</head>

<body oncontextmenu="return false">
  <!-- ðŸ”µ Header -->
  <header class="p-4 bg-blue-900 text-white text-center">
    <a href="https://cinearena.live">
      <img src="cineheader.png" class="h-10 mx-auto" alt="Cine Arena">
    </a>
  </header>

  <!-- ðŸŸ¢ Scrolling Marquee -->
  <div class="flex items-center w-full bg-green-800">
    <h4 class="shrink-0 m-0 text-lg text-white px-2">UPDATES:</h4>
    <div class="overflow-hidden whitespace-nowrap flex-grow">
      <p class="inline-block m-0 text-base text-white bg-red-600 px-2 py-1 animate-marquee" style="animation: marquee 50s linear infinite;">
        If video not play refresh once and wait for few seconds...
      </p>
    </div>
  </div>

  <!-- ðŸŸ£ Video Container -->
  <div class="w-full px-2 md:max-w-3xl md:mx-auto mt-4">
    <div id="jwplayerDiv" class="w-full rounded-md overflow-hidden bg-black"></div>
  </div>

  <script>
    // ðŸ”§ Replace with your Firebase project credentials
    const firebaseConfig = {
      apiKey: "AIzaSyBd6C_0v-_zNlHORR-feW7QiuE0s-fWJyo",
      authDomain: "online-video-streaming-990fd.firebaseapp.com",
      databaseURL: "https://online-video-streaming-990fd.firebaseio.com",
      projectId: "online-video-streaming-990fd",
      storageBucket: "online-video-streaming-990fd.firebasestorage.app",
      messagingSenderId: "816598714377",
      appId: "1:816598714377:web:f61a7c1026f34aecac90d8"
    };

    // Firebase Initialization
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const playerStateRef = db.ref("playerState");

    // Get stream URL
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      let value = urlParams.get(param);
      if (value) {
        try {
          return decodeURIComponent(value);
        } catch (e) {
          return value;
        }
      }
      return null;
    }

    const defaultStreamUrl = "https://jdou5wo6ffta.acek-cdn.com/hls2/01/06223/e85ww2zrhvvj_h/master.m3u8?t=hEJ4NRmAlCJcHulyAXs0mgW2ANiBzPmY9hwrJeboi0A&s=1756762667&e=129600&f=31115563&srv=pmjx9cjae94d&i=0.4&sp=500&p1=pmjx9cjae94d&p2=pmjx9cjae94d&asn=55836";
    const streamUrl = getQueryParam("file") || defaultStreamUrl;

    function isValidUrl(url) {
      return /^https?:\/\//.test(url);
    }

    if (isValidUrl(streamUrl)) {
      const player = jwplayer("jwplayerDiv").setup({
        file: streamUrl,
        width: "100%",
        aspectratio: "16:9",
        autostart: false,
        mute: false,
        preload: "auto",
      });

      // ðŸŸ¢ Update Firebase when local player state changes
      player.on("play", () => {
        playerStateRef.set({ state: "play" });
      });

      player.on("pause", () => {
        playerStateRef.set({ state: "pause" });
      });

      // ðŸŸ£ Listen to Firebase and sync player accordingly
      playerStateRef.on("value", (snapshot) => {
        const data = snapshot.val();
        if (!data) return;

        const currentState = player.getState();
        if (data.state === "play" && currentState !== "playing") {
          player.play();
        } else if (data.state === "pause" && currentState !== "paused") {
          player.pause();
        }
      });
    } else {
      document.getElementById("jwplayerDiv").innerHTML = "<p style='color:red; text-align:center;'>Invalid stream URL provided.</p>";
    }
  </script>

  <!-- ðŸ”» Online Counter -->
  <center class="mt-2">
    <script src="//widget.supercounters.com/ssl/online_t.js"></script>
    <script>sc_online_t(1707487,"Users Online","170ddb");</script>
    <noscript><a href="https://www.supercounters.com/">supercounters.com</a></noscript>
  </center>

  <!-- ðŸ”· Telegram Button -->
  <div class="bg-blue-600 w-full text-center py-3 mt-2">
    <a href="https://t.me/cric_stream" target="_blank">
      <button class="bg-white text-blue-700 px-4 py-2 rounded font-semibold shadow hover:bg-gray-100 transition">
        Join Telegram
      </button>
    </a>
  </div>

  <!-- Ads -->
  <div>
    <script async="async" data-cfasync="false" src="//carryglanced.com/2346ffc02acfb9eb4451708a5df9f609/invoke.js"></script>
    <div id="container-2346ffc02acfb9eb4451708a5df9f609"></div>
  </div>
</body>
</html>
